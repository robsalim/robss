<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–º–Ω–∞—è —Ä–æ–∑–µ—Ç–∫–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script> <!-- –í–∞–∂–Ω–æ! -->
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        button { padding: 10px 20px; font-size: 16px; margin: 10px; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>üîå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–∑–µ—Ç–∫–æ–π</h1>
    
    <div id="telegram-ui">
        <button id="btn-on">–í–∫–ª—é—á–∏—Ç—å</button>
        <button id="btn-off">–í—ã–∫–ª—é—á–∏—Ç—å</button>
        <p id="status">–°—Ç–∞—Ç—É—Å: –æ–∂–∏–¥–∞–Ω–∏–µ...</p>
    </div>
    
    <div id="browser-error" class="error" style="display: none;">
        –û—à–∏–±–∫–∞: –≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ Telegram!
    </div>

    <script>
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –ª–∏ Telegram WebApp API
        function initTelegramWebApp() {
            if (window.Telegram && Telegram.WebApp) {
                // Telegram WebApp –¥–æ—Å—Ç—É–ø–µ–Ω
                Telegram.WebApp.expand();
                Telegram.WebApp.enableClosingConfirmation();
                return true;
            }
            return false;
        }

        // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
        if (initTelegramWebApp()) {
            // –†–∞–±–æ—Ç–∞–µ–º —Å Telegram WebApp
            const tgWebApp = Telegram.WebApp;
            
            document.getElementById('btn-on').addEventListener('click', () => {
                tgWebApp.sendData(JSON.stringify({command: "/on"}));
            });
            
            document.getElementById('btn-off').addEventListener('click', () => {
                tgWebApp.sendData(JSON.stringify({command: "off"}));
            });
            
        } else {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
            document.getElementById('telegram-ui').style.display = 'none';
            document.getElementById('browser-error').style.display = 'block';
        }
    </script>
</body>
</html>
